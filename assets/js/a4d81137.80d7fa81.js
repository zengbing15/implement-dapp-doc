"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[482],{9155:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return s},contentTitle:function(){return r},metadata:function(){return i},toc:function(){return o},default:function(){return u}});var a=n(7462),c=n(3366),l=(n(7294),n(3905)),p=["components"],s={sidebar_position:3},r="Implement a Transfer-Tx DApp demo \u6240\u9700\u77e5\u8bc6",i={unversionedId:"implement-a-simplest-dapp",id:"implement-a-simplest-dapp",isDocsHomePage:!1,title:"Implement a Transfer-Tx DApp demo \u6240\u9700\u77e5\u8bc6",description:"Set Up the Development Environment",source:"@site/docs/implement-a-simplest-dapp.md",sourceDirName:".",slug:"/implement-a-simplest-dapp",permalink:"/implement-dapp-docs/implement-a-simplest-dapp",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/docs/implement-a-simplest-dapp.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Before We Get Started",permalink:"/implement-dapp-docs/before-we-get-started"},next:{title:"A transfer-tx  DApp demo",permalink:"/implement-dapp-docs/tansfer-tx-dapp"}},o=[{value:"Set Up the Development Environment",id:"set-up-the-development-environment",children:[]},{value:"Connect to CKB node through RPC",id:"connect-to-ckb-node-through-rpc",children:[{value:"Run a CKB Node on DEV Chain by Using Tippy",id:"run-a-ckb-node-on-dev-chain-by-using-tippy",children:[]},{value:"Call RPC interface to get blockchain info",id:"call-rpc-interface-to-get-blockchain-info",children:[]}]},{value:"A transfer transaction on CKB Testnet",id:"a-transfer-transaction-on-ckb-testnet",children:[{value:"Inputs and Outputs",id:"inputs-and-outputs",children:[]},{value:"Cell",id:"cell",children:[]},{value:"cell_deps and Witnesses",id:"cell_deps-and-witnesses",children:[]},{value:"Lock Script \uff08lock \u9501\uff09",id:"lock-script-lock-\u9501",children:[]},{value:"Address and Lock Script",id:"address-and-lock-script",children:[]},{value:"Create CKB accounts",id:"create-ckb-accounts",children:[]},{value:"Witnesses",id:"witnesses",children:[]},{value:"\u603b\u7ed3\uff0c\u8fd9\u7b14 \u8f6c\u8d26\u4ea4\u6613\u53ef\u4ee5\u8868\u793a\u6210\u8fd9\u6837\uff1a",id:"\u603b\u7ed3\u8fd9\u7b14-\u8f6c\u8d26\u4ea4\u6613\u53ef\u4ee5\u8868\u793a\u6210\u8fd9\u6837",children:[]},{value:"How to sign the transfer transaction",id:"how-to-sign-the-transfer-transaction",children:[]}]}],d={toc:o};function u(e){var t=e.components,n=(0,c.Z)(e,p);return(0,l.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"implement-a-transfer-tx-dapp-demo-\u6240\u9700\u77e5\u8bc6"},"Implement a Transfer-Tx DApp demo \u6240\u9700\u77e5\u8bc6"),(0,l.kt)("h2",{id:"set-up-the-development-environment"},"Set Up the Development Environment"),(0,l.kt)("p",null,"CKB DApps can be developed on all major platforms, including Linux, Windows, and macOS. \u8bf7\u53c2\u8003 ",(0,l.kt)("a",{parentName:"p",href:"https://cryptape.github.io/lumos-doc/docs/preparation/setupsystem"},"Set Up the Development Environment"),"  \u6839\u636e\u4f60\u7684 Operating System \u914d\u7f6e\u5f00\u53d1\u73af\u5883\u3002"),(0,l.kt)("h2",{id:"connect-to-ckb-node-through-rpc"},"Connect to CKB node through RPC"),(0,l.kt)("p",null,"\u524d\u9762\u63d0\u5230 APP \u4f1a\u901a\u8fc7\u4e00\u4e2aHTTP\u7684\u8bf7\u6c42\u53d1\u5230\u670d\u52a1\u5668\uff0c\u4ece\u800c\u8c03\u7528\u5bf9\u5e94\u7684\u540e\u7aef\u670d\u52a1\u7a0b\u5e8f\uff0cDApp \u5219\u662f\u901a\u8fc7 RPC connect to CKB  Network \u4e2d\u7684 nodes.\n","[Image: image.png]","\n\u6240\u4ee5\u65b9\u6cd5\u5f88\u7b80\u5355\uff1a\u672c\u5730\u8fd0\u884c\u4e00\u4e2a CKB \u8282\u70b9\uff0c\u7136\u540e\u518d\u8c03\u7528 RPC \u63a5\u53e3\u3002\u8fd9\u91cc\u4f1a\u7528\u5230\u4e00\u4e2a\u975e\u5e38\u597d\u7528\u7684\u5f00\u53d1\u5de5\u5177\uff1alumos , CKB DApps  can be developed upon lumos. \u540e\u9762\u4f1a\u9010\u6b65\u4ecb\u7ecd\u5982\u4f55\u4f7f\u7528 lumos \u5f00\u53d1 DApp\u3002\u5148\u6765\u770b\u7528  lumos \u7684 rpc component(package)\u8c03\u7528 RPC \u63a5\u53e3\uff0c\u6587\u5b57\u6ca1\u6709\u5b9e\u611f\uff0c\u6765\u52a8\u624b\u5b9e\u8df5\u5427\uff1a"),(0,l.kt)("h3",{id:"run-a-ckb-node-on-dev-chain-by-using-tippy"},"Run a CKB Node on DEV Chain by Using Tippy"),(0,l.kt)("p",null,"\u5982\u679c\u4f60\u5df2\u7ecf\u5b8c\u6210\u5f00\u53d1\u73af\u5883\u7684\u914d\u7f6e\uff0c\u90a3\u4e48\u4f60\u5df2\u7ecf\u8fd0\u884c\u4e86\u4e00\u4e2a CKB Node on Dev Chain \u4e86"),(0,l.kt)("p",null,"click here to view dashboard \uff1a\n","[Image: image.png]"),(0,l.kt)("h3",{id:"call-rpc-interface-to-get-blockchain-info"},"Call RPC interface to get blockchain info"),(0,l.kt)("p",null,"Use ",(0,l.kt)("inlineCode",{parentName:"p"},"@ckb-lumos/rpc")," . The RPC component (",(0,l.kt)("inlineCode",{parentName:"p"},"@ckb-lumos/rpc"),") interacts with the CKB network, communicating block and transaction information with CKB nodes."),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"$yarn add @ckb-lumos/rpc\n")),(0,l.kt)("p",null,"\u8bf7\u6c42\u83b7\u53d6 blockchain info"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'const { RPC } = require(`"@ckb-lumos/rpc"`);\nconst rpc = `new`` RPC``("http://localhost:8114"``);`\nasync function main(){\n    const result = await rpc.get_blockchain_info();\n    console.log(result);\n}\nmain();\n')),(0,l.kt)("p",null,"\u8fd9\u65f6\u5019\u4f60\u5c31\u4f1a\u83b7\u5f97 blockchain info, \u6709\u6c42\u5fc5\u5e94\u7684\u611f\u89c9\u8fd8\u4e0d\u9519\u5427~"),(0,l.kt)("h2",{id:"a-transfer-transaction-on-ckb-testnet"},"A transfer transaction on CKB Testnet"),(0,l.kt)("p",null,"DApp \u548c App \u540e\u7aef\u6700\u5927\u7684\u4e0d\u540c\u5728\u4e8eDApp \u662f\u901a\u8fc7\u53d1\u4ea4\u6613\u4e0e CKB \u4ea4\u4e92\u7684\uff0c\u6240\u4ee5\u7406\u89e3 CKB \u7684\u4ea4\u6613\u662f\u975e\u5e38\u91cd\u8981\u7684\uff0cthis section \u53ef\u80fd\u6d89\u53ca\u5230\u7684\u6982\u5ff5\u6bd4\u8f83\u591a\uff0c\u4e0d\u8fc7\u4e0d\u7528\u62c5\u5fc3\uff0c\u6211\u8fd8\u662f\u4f1a\u548c\u5b9e\u8df5\u76f8\u7ed3\u5408\uff0c\u529b\u6c42\u80fd\u8ba9\u5927\u5bb6\u66f4\u5bb9\u6613\u7406\u89e3\u3002"),(0,l.kt)("p",null,"\u533a\u5757\u94fe\u53ef\u4ee5\u770b\u4f5c\u662f\u72b6\u6001\u673a\uff0c\u8bb0\u5f55\u7740\u94fe\u4e0a\u72b6\u6001\uff0c\u6bcf\u6b21\u6709\u65b0\u7684\u4ea4\u6613\u88ab\u6253\u5305\u8fdb\u5165\u533a\u5757\u63d0\u4ea4\u4e0a\u94fe\uff0c\u90fd\u610f\u5473\u7740\u533a\u5757\u94fe\u6839\u636e\u534f\u8bae\u4e2d\u5b9a\u4e49\u7684\u72b6\u6001\u8f6c\u6362\u903b\u8f91\u8fdb\u884c\u4e86\u72b6\u6001\u8f6c\u6362, Nervos CKB Layer1 \u4e5f\u9075\u5faa\u7740\u8fd9\u6837\u7684\u903b\u8f91\u3002\u5148\u6765\u770b\u4e00\u7b14\u53d1\u751f\u5728 CKB Aggron Testnet \u4e0a\u7684\u8f6c\u8d26\u4ea4\u6613 \uff08\u8f6c\u8d26\u4ea4\u6613\u7ed3\u6784\u6bd4\u8f83\u7b80\u5355\uff09\uff0c\u8fd9\u7b14\u8f6c\u8d26\u4ea4\u6613\u5b9e\u9645\u4e0a\u662f\u53d1\u9001\u65b9\u8f6c\u7ed9\u63a5\u6536\u65b9\u4e00\u4e9b CKB, \u53ef\u4ee5\u8868\u793a\u6210\uff0c\n\u53d1\u9001\u65b9\u5730\u5740\uff1ackt1qyqddquttee9zqlj7xlmtrd7vjunp2zh5f3spa2vjy\n\u63a5\u6536\u65b9\u5730\u5740\uff1ackt1qyqv70xf5cusptp0gwzqj8ewsen7j2c0aa8sq5d7y6"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Input: ",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u53d1\u9001\u65b9 \u539f\u72b6\u6001"))),(0,l.kt)("li",{parentName:"ul"},"Output",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u63a5\u6536\u65b9  \u72b6\u6001"),(0,l.kt)("li",{parentName:"ul"},"\u53d1\u9001\u65b9 \u65b0\u72b6\u6001")))),(0,l.kt)("p",null,"\u4e0d\u8fc7\u4ea4\u6613\u4ee3\u7801\u4e4d\u4e00\u770b\u6709\u70b9\u590d\u6742\uff0c\u6ca1\u5173\u7cfb\uff0c\u6211\u4eec\u628a\u4ea4\u6613\u62c6\u5206\u6210\u4e24\u90e8\u5206\uff1a Inputs and Outputs \uff0ccell_deps and witnesses"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'{\n  "version": "0x0",\n  "cell_deps": [\n    {\n      "out_point": {\n        "tx_hash": "0xf8de3bb47d055cdf460d93a2a6e1b05f7432f9777c8c474abf4eec1d4aee5d37",\n        "index": "0x0"\n      },\n      "dep_type": "dep_group"\n    }\n  ],\n  "header_deps": [],\n  "inputs": [\n    {\n      "since": "0x0",\n      "previous_output": {\n        "tx_hash": "0xb2d676c6215be0166b5b048396f581b3a0620db6ae879a3556cd8561cbec8ce1",\n        "index": "0x1"\n      }\n    }\n  ],\n  "outputs": [\n    {\n      "capacity": "0x56cc9c900",\n      "lock": {\n        "code_hash": "0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8",\n        "hash_type": "type",\n        "args": "0xcf3cc9a63900ac2f4384091f2e8667e92b0fef4f"\n      }\n    },\n    {\n      "capacity": "0x5a5f6d2bccdc",\n      "lock": {\n        "code_hash": "0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8",\n        "hash_type": "type",\n        "args": "0xd6838b5e725103f2f1bfb58dbe64b930a857a263"\n      }\n    }\n  ],\n  "outputs_data": [\n    "0x",\n    "0x"\n  ],\n  "witnesses": [\n    "0x550000001000000055000000550000004100000078aa17dc603d72b8dcd7d214f9a6e4bb4bbf6c77f172a66d889f3958aa16f8a812e6b7d3e3ed56f361d255b7a834bdbc2e69442da536e2ae7a0b3feffa2b556f01"\n  ]\n}\n')),(0,l.kt)("h3",{id:"inputs-and-outputs"},"Inputs and Outputs"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'"inputs": [\n    {\n      "since": "0x0",\n      "previous_output": {\n        "tx_hash": "0xb2d676c6215be0166b5b048396f581b3a0620db6ae879a3556cd8561cbec8ce1",\n        "index": "0x1"\n      }\n    }\n  ],\n  "outputs": [\n    {\n      "capacity": "0x56cc9c900",\n      "lock": {\n        "code_hash": "0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8",\n        "hash_type": "type",\n        "args": "0xcf3cc9a63900ac2f4384091f2e8667e92b0fef4f"\n      }\n    },\n    {\n      "capacity": "0x5a5f6d2bccdc",\n      "lock": {\n        "code_hash": "0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8",\n        "hash_type": "type",\n        "args": "0xd6838b5e725103f2f1bfb58dbe64b930a857a263"\n      }\n    }\n  ],\n  "outputs_data": [\n    "0x",\n    "0x"\n  ],\n')),(0,l.kt)("p",null,"\u4f60\u53ef\u80fd\u53d1\u73b0\u4e86 outputs \u4e2d \u6709\u4e24\u4e2a\u7ed3\u6784\u7c7b\u4f3c\u7684 object\uff08inputs \u6682\u65f6\u653e\u5728\u4e00\u8fb9\uff0c\u5148\u4e0d\u53bb\u7ba1\u5b83\uff09"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'  "outputs": [\n    {\n      "capacity": "0x56cc9c900",\n      "lock": {\n        "code_hash": "0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8",\n        "hash_type": "type",\n        "args": "0xcf3cc9a63900ac2f4384091f2e8667e92b0fef4f"\n      }\n    },\n    {\n      "capacity": "0x5a5f6d2bccdc",\n      "lock": {\n        "code_hash": "0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8",\n        "hash_type": "type",\n        "args": "0xd6838b5e725103f2f1bfb58dbe64b930a857a263"\n      }\n    }\n  ],\n   "outputs_data": [\n    "0x",\n    "0x"\n  ],\n')),(0,l.kt)("p",null,"You get it!  \u8fd9\u4e2a\u53eb\u505a  Cell ( \u8fd9\u53ef\u662f CKB \u6700\u68d2\u7684\u4e1c\u897f\u4e86\uff01)"),(0,l.kt)("h3",{id:"cell"},"Cell"),(0,l.kt)("p",null,"Cell \u662f CKB \u4e2d\u6700\u57fa\u672c\u7684\u72b6\u6001\u5355\u5143\u3002\u6240\u4ee5\u4ea4\u6613\u53ef\u4ee5\u8868\u793a\u6210\uff1a"),(0,l.kt)("p",null,"Inputs: "),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u53d1\u9001\u65b9Cell")),(0,l.kt)("p",null,"Outputs:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u63a5\u6536\u65b9 Cell"),(0,l.kt)("li",{parentName:"ul"},"\u53d1\u9001\u65b9 \u65b0 Cell")),(0,l.kt)("p",null,"\u4e00\u4e2a Cell \u7531\u4ee5\u4e0b\u51e0\u4e2a\u5b57\u6bb5\u7ec4\u6210:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"Cell: {\n   capacity: uint64\n   lock: Script\n   type: Script\n   data: `Bytes`\n   } \n")),(0,l.kt)("p",null,"\u56db\u4e2a\u5b57\u6bb5\u5177\u4f53\u542b\u4e49\u5982\u4e0b\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"capacity\uff1a"),"\u8868\u793a Cell \u7684\u7a7a\u95f4\u5927\u5c0f\uff0c\u540c\u65f6\u4e5f\u662f\u8fd9\u4e2a Cell \u4ee3\u8868\u7684\u539f\u751f\u4ee3\u5e01\u7684\u6570\u91cf\uff0c"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"lock\uff1a"),"\u662f\u4e00\u4e2a Script\uff0c\u672c\u8d28\u76f8\u5f53\u4e8e\u662f\u4e00\u628a\u9501\u3002\u6bcf\u4e2a Cell \u90fd\u6709\u8fd9\u79cd\u9501\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"type:")," \u662f\u4e00\u4e2a Script\uff0c\u548c lock \u4e00\u6837\uff0c\u53ea\u662f\u9501\u7684\u7528\u9014\u4e0d\u540c\uff0c\u662f optional\u3002"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("strong",{parentName:"li"},"data:")," \u662f\u4e00\u4e2a\u65e0\u683c\u5f0f\u5b57\u7b26\u4e32\uff0c\u53ef\u4ee5\u5728\u8fd9\u91cc\u5b58\u653e\u4efb\u4f55\u7c7b\u578b\u7684\u6570\u636e\u3002\u5b9e\u73b0\u8fc7\u7a0b\u4e2d\uff0c\u4e3a\u4e86\u65b9\u4fbf\u5904\u7406\uff0c\u6211\u4eec\u628a\u6240\u6709 Cell \u7684 data \u90fd\u653e\u5230",(0,l.kt)("inlineCode",{parentName:"li"}," outputs_data"))),(0,l.kt)("p",null,"\u5982\u679c\u628a Cell \u770b\u6210\u662f\u76d2\u5b50\u7684\u8bdd\uff0cCell \u4ee3\u8868\u7684\u539f\u751f\u4ee3\u5e01\u7684\u6570\u91cf\u8d8a\u591a\uff0c\u76d2\u5b50\u8d8a\u5927\uff0c\u76d2\u5b50\u91cc\u88c5\u7684\u662f\u4efb\u4f55\u7c7b\u578b\u7684\u6570\u636e data\uff0c\u4e5f\u5c31\u662f\u8bf4 Nervos CKB \u94fe\u4e0a\u7684\u6570\u636e\u5b58\u653e\u7a7a\u95f4\u662f\u8981\u7528 CKB \u539f\u751f\u4ee3\u5e01\u6362\u7684\u3002\u55ef\uff0c\u53ef\u4ee5\u8bf4\u662f\u5bf8\u571f\u5bf8\u91d1\u5427~"),(0,l.kt)("p",null,"\u6240\u4ee5 outputs \u53ef\u4ee5\u8868\u793a\u6210\u8fd9\u6837\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u63a5\u6536\u65b9 Cell",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"capacity: 0x56cc9c900"),(0,l.kt)("li",{parentName:"ul"},"lock \u9501"),(0,l.kt)("li",{parentName:"ul"},"data: 0x"))),(0,l.kt)("li",{parentName:"ul"},"\u53d1\u9001\u65b9 \u65b0 Cell",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"capacity: 0x5a5f6d2bccdc"),(0,l.kt)("li",{parentName:"ul"},"lock \u9501"),(0,l.kt)("li",{parentName:"ul"},"data: 0x")))),(0,l.kt)("p",null,"\u63a5\u4e0b\u6765\u6211\u4eec\u6765\u770b  Inputs \uff0c\u4f60\u4f1a\u53d1\u73b0\u91cc\u9762\u6709\u4e00\u4e2a\u5b57\u6bb5 ",(0,l.kt)("inlineCode",{parentName:"p"},'"previous_output"')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'"inputs": [\n    {\n      "since": "0x0",\n      "previous_output": {\n        "tx_hash": "0xb2d676c6215be0166b5b048396f581b3a0620db6ae879a3556cd8561cbec8ce1",\n        "index": "0x1"\n      }\n    }\n  ],\n')),(0,l.kt)("p",null,"\u5b57\u6bb5\u540d\u5df2\u7ecf\u5b8c\u5168\u8868\u8fbe\u4e86\u542b\u4e49\uff1ainputs \u5c31\u662f previous output  \uff08\u540d\u5b57\u8d77\u5f97\u662f\u4e0d\u662f\u5f88\u597d~\uff09\uff0c\u7531 tx_hash \u548c index \u7d22\u5f15\u5230 Cell\uff0c \u5982\u679c\u4f60\u6253\u5f00 ",(0,l.kt)("a",{parentName:"p",href:"https://explorer.nervos.org/aggron/transaction/0xb2d676c6215be0166b5b048396f581b3a0620db6ae879a3556cd8561cbec8ce1"},"CKB-Explorer")," \uff08\u8bb0\u5f97\u5207\u6362\u7f51\u7edc\uff09 \uff0c\u7528 tx_hash \u641c\u7d22\uff0c\u5c31\u4f1a\u627e\u5230\u8fd9\u7b14\u4ea4\u6613\u7684 ",(0,l.kt)("inlineCode",{parentName:"p"},'"index": "0x1"')," \u7684 Cell, \u8fd9\u5c31\u662f  inputs cell "),(0,l.kt)("p",null,"[Image: image.png]"),(0,l.kt)("p",null,"\u603b\u7ed3\u4e00\u4e0b\uff0cCKB \u4e2d\u7684\u57fa\u672c\u72b6\u6001\u5355\u5143\u662f Cell, \u4ea4\u6613\u7684\u672c\u8d28\u5c31\u662f\u9500\u6bc1\u4e00\u4e9b Cell\uff0c\u518d\u751f\u6210\u4e00\u4e9b\u65b0\u7684 Cell\uff0c\u8fd9\u4e9b\u65b0\u7684 Cell \u4e5f\u4f1a\u6210\u4e3a\u53e6\u4e00\u7b14\u4ea4\u6613\u4e2d\u7684\u9700\u8981\u9500\u6bc1\u7684 input cells\u3002 The concept is similar to that of ",(0,l.kt)("a",{parentName:"p",href:"https://en.wikipedia.org/wiki/Unspent_transaction_output"},"UTXO")," in Bitcoin's terminology. "),(0,l.kt)("p",null,"Cool! \u4f60\u5df2\u7ecf\u5f04\u6e05\u695a CKB TX \u4e2d\u6700\u6838\u5fc3\u7684\u90e8\u5206\uff0c\u90a3\u4e48\u63a5\u4e0b\u53bb\u6765\u770b\u5269\u4e0b\u7684\u90e8\u5206"),(0,l.kt)("h3",{id:"cell_deps-and-witnesses"},"cell_deps and Witnesses"),(0,l.kt)("p",null,"\u5148\u6765\u770b",(0,l.kt)("inlineCode",{parentName:"p"}," cell_deps")," \uff0c \u4f60\u53d1\u73b0\u4e86\u5417\uff1f",(0,l.kt)("inlineCode",{parentName:"p"},"out_point"),"  \u4e5f\u662f",(0,l.kt)("inlineCode",{parentName:"p"},"tx_hash")," \u548c ",(0,l.kt)("inlineCode",{parentName:"p"},"index"),"  \u7ec4\u6210\u7684\uff0c\u6240\u4ee5 cell_deps \u5b9e\u9645\u4e0a\u4e5f\u662f\u7528 ",(0,l.kt)("inlineCode",{parentName:"p"},"tx_hash")," \u548c ",(0,l.kt)("inlineCode",{parentName:"p"},"index")," \u6307\u5411\u4e86\u4e00\u4e2a cell\uff0c\u90a3\u4e48\u8fd9\u4e2a cell \u662f\u7528\u6765\u5e72\u4ec0\u4e48\u7684\u5462\uff1f"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'  "cell_deps": [\n    {\n      "out_point": {\n        "tx_hash": "0xf8de3bb47d055cdf460d93a2a6e1b05f7432f9777c8c474abf4eec1d4aee5d37",\n        "index": "0x0"\n      },\n      "dep_type": "dep_group"\n    }\n  ],\n')),(0,l.kt)("p",null,"CKB \u7cfb\u7edf\u5185\u5efa\u4e86\u4e00\u4e2a\u5f88\u91cd\u8981\u7684\u667a\u80fd\u5408\u7ea6\u53eb ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/nervosnetwork/ckb-system-scripts/blob/master/c/secp256k1_blake160_sighash_all.c"},"SECP256K1_BLAKE160"),"\uff0c \u5b83\u662f\u6bcf\u4e2a Cell \u5728\u666e\u901a\u7684\u8f6c\u8d26\u4ea4\u6613\u4e2d\u9ed8\u8ba4\u4f7f\u7528\u7684 lock \u9501 \u3002 \u8fd9\u628a\u9501\u4ee3\u8868\u7684\u5c31\u662f\u7528 SECP256K1 \u8fd9\u79cd\u7279\u5b9a\u7684\u52a0\u5bc6\u7b97\u6cd5\uff0c\u6765\u4fdd\u62a4\u6bcf\u4e2a Cell \u6700\u57fa\u7840\u7684\u6240\u5c5e\u6743\u3002CKB \u7cfb\u7edf\u5728\u521b\u4e16\u5757\u7684\u65f6\u5019\u521b\u5efa\u4e86\u4e00\u4e9b cell, \u628a\u5b9e\u9645\u4e0a\u8981\u6267\u884c\u7684\u5408\u7ea6\u4ee3\u7801\uff0c\u653e\u5728\u4e86 cell \u7684 data \u5b57\u6bb5\u91cc\uff0c\u8f6c\u8d26\u65f6\uff0c\u6211\u4eec\u628a\u8fd9\u4e9b Cell \u4f5c\u4e3a cell_deps \u5f15\u5165\u5230\u4ea4\u6613\u4e2d\u3002"),(0,l.kt)("p",null,"\u5bf9\u6bd4",(0,l.kt)("a",{parentName:"p",href:"https://github.com/nervosnetwork/rfcs/blob/master/rfcs/0024-ckb-system-script-list/0024-ckb-system-script-list.md#locks"},"SECP256K1_BLAKE160 \u7684 info")," \u53ef\u4ee5\u770b\u5230 tx_hash \u548c index \u662f\u4e00\u81f4\u7684\uff0c\u5982\u679c\u53bb CKB-Explorer \u67e5\u8fd9\u4e2a ",(0,l.kt)("a",{parentName:"p",href:"https://explorer.nervos.org/aggron/transaction/0xf8de3bb47d055cdf460d93a2a6e1b05f7432f9777c8c474abf4eec1d4aee5d37"},"Cell info")," \uff0c\u53ef\u4ee5\u770b\u5230 data \u90e8\u5206\u662f\u6709\u6570\u636e\u7684\u3002\n","[Image: image.png][Image: image.png]"),(0,l.kt)("h3",{id:"lock-script-lock-\u9501"},"Lock Script \uff08lock \u9501\uff09"),(0,l.kt)("p",null,"\u90a3\u4e48\u5177\u4f53\u7684\u8fd0\u4f5c\u65b9\u5f0f\u662f\u4ec0\u4e48\u6837\u7684\u5462\uff1f"),(0,l.kt)("p",null,"CKB \u4e2d\u8fd9\u6837\u7684\u201c\u9501\u201d\uff0c\u53eb\u505a Script\uff0c \u4e00\u4e2a Script \u7531\u4ee5\u4e0b\u51e0\u4e2a\u5b57\u6bb5\u7ec4\u6210:"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"Script: {\n   code_hash: H256(hash)\n   args: Bytes\n   hash_type: String, could be ``type`` or ``data`  `\n   } \n")),(0,l.kt)("p",null,"\u672c\u6587\u6863\u4e2d\u7684 Cell \u7528\u5230\u7684 lock Script\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"Lock Script: {\n   code_hash: H256(hash)\n   args: Bytes\n   hash_type: ``type`` \n   } \n")),(0,l.kt)("p",null,"\u5728 code_hash \u586b\u4e0a dep_cell \u7684 code hash\uff0c\u540c\u65f6\u5728 args \u5b57\u6bb5\u653e\u5165\u81ea\u5df1\u7684\u516c\u94a5\u54c8\u5e0c\uff0c \u53d1\u8d77\u4ea4\u6613\u65f6\uff0c \u5c31\u7528\u79c1\u94a5\u5bf9\u8fd9\u7b14\u4ea4\u6613\u505a\u4e00\u4e2a\u7b7e\u540d\uff0cWitnesses \u653e\u7684\u5c31\u662f\u8fd9\u4e2a\u7b7e\u540d\u3002\u8fd9\u6837SECP256K1 \u52a0\u5bc6\u7b97\u6cd5\u8f93\u5165\u516c\u94a5\u548c\u7b7e\u540d\uff0c\u5c31\u80fd\u5224\u65ad\u8fd9\u7b14\u4ea4\u6613\u662f\u4e0d\u662f\u7531\u5bf9\u5e94\u7684\u79c1\u94a5\u53d1\u8d77\u7684\uff0c \u4ece\u800c\u4e5f\u5c31\u80fd\u5224\u65ad\u80cc\u540e\u662f\u4e0d\u662f\u8fd9\u4e2a Cell \u771f\u6b63\u7684\u4e3b\u4eba\u5728\u64cd\u4f5c\uff0c\u4e5f\u5c31\u662f\u4fdd\u8bc1\u4e86 Cell \u7684\u6240\u5c5e\u6743\u3002"),(0,l.kt)("p",null,"\u5bf9\u6bd4 ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/nervosnetwork/rfcs/blob/master/rfcs/0024-ckb-system-script-list/0024-ckb-system-script-list.md#locks"},"SECP256K1_BLAKE160 \u7684 info"),"  \u7684 code_hash \u4e0e output cells \u4e2d\u7684 code_hash \u662f \u4e00\u81f4\u7684\u3002"),(0,l.kt)("p",null,"[Image: image.png]"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'  "cell_deps": [\n    {\n      "out_point": {\n        "tx_hash": "0xf8de3bb47d055cdf460d93a2a6e1b05f7432f9777c8c474abf4eec1d4aee5d37",\n        "index": "0x0"\n      },\n      "dep_type": "dep_group"\n    }\n  ],\n  ......\n  "outputs": [\n    {\n      "capacity": "0x56cc9c900",\n      "lock": {\n        "code_hash": "0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8",\n        "hash_type": "type",\n        "args": "0xcf3cc9a63900ac2f4384091f2e8667e92b0fef4f"\n      }\n    },\n    {\n      "capacity": "0x5a5f6d2bccdc",\n      "lock": {\n        "code_hash": "0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8",\n        "hash_type": "type",\n        "args": "0xd6838b5e725103f2f1bfb58dbe64b930a857a263"\n      }\n    }\n  ],\n  "outputs_data": [\n    "0x",\n    "0x"\n  ],\n  "witnesses": [\n    "0x550000001000000055000000550000004100000078aa17dc603d72b8dcd7d214f9a6e4bb4bbf6c77f172a66d889f3958aa16f8a812e6b7d3e3ed56f361d255b7a834bdbc2e69442da536e2ae7a0b3feffa2b556f01"\n  ]\n}\n')),(0,l.kt)("h3",{id:"address-and-lock-script"},"Address and Lock Script"),(0,l.kt)("p",null,"\u6700\u540e\u8fd8\u9700\u8981\u4f60\u7406\u89e3\u4e00\u4e2a\u4e1c\u897f\uff0c\u5c31\u662f\u8f6c\u8d26\u4ea4\u6613\u53cc\u65b9\u7684 Address\uff1a"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u53d1\u9001\u65b9\u5730\u5740\uff1ackt1qyqddquttee9zqlj7xlmtrd7vjunp2zh5f3spa2vjy"),(0,l.kt)("li",{parentName:"ul"},"\u63a5\u6536\u65b9\u5730\u5740\uff1ackt1qyqv70xf5cusptp0gwzqj8ewsen7j2c0aa8sq5d7y6")),(0,l.kt)("p",null,'\u5728 CKB \u4e2d\uff0cAccount \u5c31\u662f\u4e00\u5806 live cell \u7684\u96c6\u5408\uff0c\u5177\u6709\u540c\u6837\u7684 lock\uff0c\u5730\u5740 packages a lock script into a single line in a verifiable and human-readable format. \u6240\u4ee5 address \u5c31\u4ee3\u8868\u4e86 account \uff0c\u6b64\u5916\u5730\u5740\u8fd8\u9075\u5faa\u4e00\u5b9a\u7684 format\uff0c"ckt" is for the testnet or devchain, see ',(0,l.kt)("a",{parentName:"p",href:"https://github.com/nervosnetwork/rfcs/blob/master/rfcs/0021-ckb-address-format/0021-ckb-address-format.md#ckb-address-format"},"RFC: CKB Address Format")),(0,l.kt)("p",null,"private key, public key\uff08args\uff09, lock script, and CKB address \u4e4b\u95f4\u7684\u5173\u7cfb\u662f\u8fd9\u6837\u7684\uff1a\n","[Image: image.png]"),(0,l.kt)("h3",{id:"create-ckb-accounts"},"Create CKB accounts"),(0,l.kt)("p",null,(0,l.kt)("a",{parentName:"p",href:"https://github.com/nervosnetwork/ckb-cli"},"CKB-CLI")," \u53ef\u4ee5\u7528\u6765\u751f\u6210 account \u9700\u8981\u7684\u6240\u6709\u4fe1\u606f\uff0c see ",(0,l.kt)("a",{parentName:"p",href:"https://cryptape.github.io/lumos-doc/docs/reference/ckbaccount#create-the-accounts-by-using-ckb-cli"},"Create the Accounts by Using ckb-cli")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"Prerequisites\uff1a",(0,l.kt)("a",{parentName:"li",href:"https://cryptape.github.io/lumos-doc/docs/preparation/setupsystem"},"Run a CKB Node on DEV Chain by Using Tippy")),(0,l.kt)("li",{parentName:"ul"},"Step 1. ",(0,l.kt)("a",{parentName:"li",href:"https://cryptape.github.io/lumos-doc/docs/reference/ckbaccount#step-1-download-the-ckb-pre-built-installer-package"},"Download the CKB pre-built installer package"),"."),(0,l.kt)("li",{parentName:"ul"},"Step 2. ",(0,l.kt)("a",{parentName:"li",href:"https://cryptape.github.io/lumos-doc/docs/reference/ckbaccount#step-2-verify-the-ckb-cli-tool-is-working-and-check-the-version"},"Verify the ckb-cli tool is working and check the version"),"."),(0,l.kt)("li",{parentName:"ul"},"Step 3. ",(0,l.kt)("a",{parentName:"li",href:"https://cryptape.github.io/lumos-doc/docs/reference/ckbaccount#step-3-create-the-account-for-alice"},"Create the account")),(0,l.kt)("li",{parentName:"ul"},"Step 4. ",(0,l.kt)("a",{parentName:"li",href:"https://cryptape.github.io/lumos-doc/docs/reference/ckbaccount#step-4-get-the-private-key-for-the-account-of-alice"},"Get the private key for the account")),(0,l.kt)("li",{parentName:"ul"},"Step 5. ",(0,l.kt)("a",{parentName:"li",href:"https://cryptape.github.io/lumos-doc/docs/reference/ckbaccount#step-5-get-ckb-capacity-for-the-account-of-alice"},"Get CKB capacity for the account"))),(0,l.kt)("p",null,"\u8fd9\u662f\uff1ackt1qyqddquttee9zqlj7xlmtrd7vjunp2zh5f3spa2vjy \u7684 info"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"address:\n  mainnet: ckb1qyqddquttee9zqlj7xlmtrd7vjunp2zh5f3suc5n7c\n  testnet: ckt1qyqddquttee9zqlj7xlmtrd7vjunp2zh5f3spa2vjy\nlock_arg: 0xd6838b5e725103f2f1bfb58dbe64b930a857a263\nlock_hash: 0x10f9a227094e77ee9149b3e8ed1e34f6d5c7c604bab81e0df42f13e1d33ac0fb \n")),(0,l.kt)("p",null,"\u8fd9\u662f\uff1ackt1qyqv70xf5cusptp0gwzqj8ewsen7j2c0aa8sq5d7y6 \u7684info"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"address:\n    mainnet: ckb1qyqv70xf5cusptp0gwzqj8ewsen7j2c0aa8sa3npgx\n    testnet: ckt1qyqv70xf5cusptp0gwzqj8ewsen7j2c0aa8sq5d7y6\n  lock_arg: 0xcf3cc9a63900ac2f4384091f2e8667e92b0fef4f\n  lock_hash: 0xc7cea924f48d069396b6826ee17653580d90d505544fa6940dbba3d24d9258ba\n")),(0,l.kt)("p",null,"\u5bf9\u6bd4 \u8fd9\u4e24\u4e2a\u5730\u5740\u7684 lock_arg \u548c output cells \u7684 args \u662f\u4e00\u81f4\u7684\u3002"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'  "outputs": [\n    {\n      "capacity": "0x56cc9c900",\n      "lock": {\n        "code_hash": "0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8",\n        "hash_type": "type",\n        "args": "0xcf3cc9a63900ac2f4384091f2e8667e92b0fef4f"\n      }\n    },\n    {\n      "capacity": "0x5a5f6d2bccdc",\n      "lock": {\n        "code_hash": "0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8",\n        "hash_type": "type",\n        "args": "0xd6838b5e725103f2f1bfb58dbe64b930a857a263"\n      }\n    }\n  ],\n  "outputs_data": [\n    "0x",\n    "0x"\n  ],\n  "witnesses": [\n    "0x550000001000000055000000550000004100000078aa17dc603d72b8dcd7d214f9a6e4bb4bbf6c77f172a66d889f3958aa16f8a812e6b7d3e3ed56f361d255b7a834bdbc2e69442da536e2ae7a0b3feffa2b556f01"\n  ]\n}\n')),(0,l.kt)("h3",{id:"witnesses"},"Witnesses"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"contained signature which is generated by \u53d1\u9001\u65b9 private_key")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"// witness = {lock is 0, input_type is null, output_type is null}\n")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},'Witnesses = List(["0x55000000100000005500000055000000410000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000"]);\n')),(0,l.kt)("h3",{id:"\u603b\u7ed3\u8fd9\u7b14-\u8f6c\u8d26\u4ea4\u6613\u53ef\u4ee5\u8868\u793a\u6210\u8fd9\u6837"},"\u603b\u7ed3\uff0c\u8fd9\u7b14 \u8f6c\u8d26\u4ea4\u6613\u53ef\u4ee5\u8868\u793a\u6210\u8fd9\u6837\uff1a"),(0,l.kt)("p",null,"Cell_deps:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"point to the cell with SECP256K1 code")),(0,l.kt)("p",null,"Inputs: "),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u53d1\u9001\u65b9Cell\uff1apoint to previous_output")),(0,l.kt)("p",null,"Outputs:"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u63a5\u6536\u65b9 Cell",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"capacity: 0x56cc9c900"),(0,l.kt)("li",{parentName:"ul"},"lock script",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"SECP256K1 code hash"),(0,l.kt)("li",{parentName:"ul"},"\u63a5\u6536\u65b9 public_key hash"))),(0,l.kt)("li",{parentName:"ul"},"data: 0x"))),(0,l.kt)("li",{parentName:"ul"},"\u53d1\u9001\u65b9 \u65b0 Cell",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"capacity: 0x5a5f6d2bccdc"),(0,l.kt)("li",{parentName:"ul"},"lock script",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"SECP256K1 code hash"),(0,l.kt)("li",{parentName:"ul"},"\u53d1\u9001\u65b9 public_key hash"))),(0,l.kt)("li",{parentName:"ul"},"data: 0x")))),(0,l.kt)("p",null,"\u6700\u7ec8\u7528 \u79c1\u94a5\u5bf9\u8fd9\u7b14\u4ea4\u6613\u8fdb\u884c\u7b7e\u540d\u5e76\u53d1\u9001\u4e0a\u94fe\u3002"),(0,l.kt)("h3",{id:"how-to-sign-the-transfer-transaction"},"How to sign the transfer transaction"),(0,l.kt)("p",null,"We need the following arguments to sign a tx\uff0c see ",(0,l.kt)("a",{parentName:"p",href:"https://github.com/nervosnetwork/ckb-system-scripts/wiki/How-to-sign-transaction"},"How to sign transaction")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre"},"`* pk, secp256k1 private key\n* witnesses, contains signatures of the tx.`\n")),(0,l.kt)("p",null,"this is the default signing solution used in CKB now."),(0,l.kt)("p",null,"\u5269\u4e0b\u7684\u5b57\u6bb5 ",(0,l.kt)("inlineCode",{parentName:"p"},"version")," \uff0c ",(0,l.kt)("inlineCode",{parentName:"p"},"header_deps"),"\uff0c",(0,l.kt)("inlineCode",{parentName:"p"},"since")," \u8ddf\u672c\u6587\u6863\u5185\u5bb9\u5173\u7cfb\u4e0d\u5927\uff0c",(0,l.kt)("a",{parentName:"p",href:"https://github.com/nervosnetwork/rfcs/blob/master/rfcs/0019-data-structures/0019-data-structures.md"},"see RFC: Data Structures of Nervos CKB")))}u.isMDXComponent=!0}}]);